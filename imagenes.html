<!DOCTYPE html>
	<html>
		<head>
			<title>
				Dota Underlords
			</title>
			<link rel="stylesheet" type="text/css" href="paginaestilo.css">
			<link rel="shortcut icon" type="image/png" href="images/Underlordslogo.png">
		</head>
		<body>
			<header>
				<img src="images/Underlordsheader.png">
			</header>
			<nav class="menu">
				<ul class="nav">
					<li>
						<a href="index.html" target="_blank">Inicio</a>
					</li>
				</ul>
				<ul class="nav">
					<li>
						<a href="#">Recursos</a>						
						<ul>
							<li>
								<a class="sub" href="imagenes.html" target="_blank">Imagenes</a>
							</li>
							<li>
								<a class="sub" href="clases.html" target="_blank">Clases</a>
							</li>
						</ul>						
					</li>
				</ul>				
				<ul class="nav">
					<li>
						<a href="contacto.html" target="_blank">Contáctanos</a>
					</li>
				</ul>
				<ul class="nav">
					<li>
						<a href="como jugar.html" target="_blank">Como jugar</a>
					</li>
				</ul>
			</nav>
			<div class="midbody">
				
				<section>	
					<div class="carousel-wrapper">
						<div class="carousel">

						<img class="carousel__photo initial" src="images/under1.jpg">
						<img class="carousel__photo" src="images/under2.jpg">
						<img class="carousel__photo" src="images/under4.jpg">
						<img class="carousel__photo" src="images/under5.jpg">
											
						<div class="carousel__button--next"></div>
						<div class="carousel__button--prev"></div>
						</div>
					</div>

					<script>
						!(function(d){
							 // All code will go in here. We've renamed 'document' to 'd'.
							var itemClassName = "carousel__photo";
							items = d.getElementsByClassName(itemClassName),
							totalItems = items.length,
							slide = 0,
							moving = true;
							

							// Set classes
							function setInitialClasses() {
								// Targets the previous, current, and next items
								// This assumes there are at least three items.
								items[totalItems - 1].classList.add("prev");
								items[0].classList.add("active");
								items[1].classList.add("next");
							}
							// Set event listeners
							function setEventListeners() {
								var next = d.getElementsByClassName('carousel__button--next')[0],
									prev = d.getElementsByClassName('carousel__button--prev')[0];
								next.addEventListener('click', moveNext);
								prev.addEventListener('click', movePrev);
							}

							// Next navigation handler
							function moveNext() {
								// Check if moving
								if (!moving) {
									// If it's the last slide, reset to 0, else +1
									if (slide == (totalItems - 1)) {
									slide = 0;
									} 
									else {
										slide++;
									}
									// Move carousel to updated slide
									moveCarouselTo(slide);
								}
							}
							// Previous navigation handler
							function movePrev() {
							// Check if moving
								if (!moving) {
									// If it's the first slide, set as the last slide, else -1
									if (slide === 0) {
									slide = (totalItems - 1);
									} 
								else {
									slide--;
								}
								// Move carousel to updated slide
								moveCarouselTo(slide);
							}
							}

							function disableInteraction() {
								// Set 'moving' to true for the same duration as our transition.
								// (0.5s = 500ms)
								
								moving = true;
								// setTimeout runs its function once after the given time
								setTimeout(function(){
										moving = false
								}
								, 500);
							}
							
							function moveCarouselTo(slide) {
								console.log("USANDO FUNCIÓN MoveCarouselTo()"+slide);
								console.log(totalItems);
								// Check if carousel is moving, if not, allow interaction
								if(!moving) {

									// temporarily disable interactivity

									disableInteraction();

									// Update the "old" adjacent slides with "new" ones

									var newPrevious = slide - 1,
										newNext = slide + 1,
										oldPrevious = slide - 2,
										oldNext = slide + 2;
									// Test if carousel has more than three items
									if ((totalItems - 1) >= 3) {
										// Checks and updates if the new slides are out of bounds
										if (newPrevious <= 0) {
											oldPrevious = (totalItems - 1);
										} else if (newNext >= (totalItems - 1)){
											oldNext = 0;
										}
										// Checks and updates if slide is at the beginning/end
										if (slide === 0) {
											newPrevious = (totalItems - 1);
											oldPrevious = (totalItems - 2);
											oldNext = (slide + 1);
										} else if (slide === (totalItems -1)) {
											newPrevious = (slide - 1);
											newNext = 0;
											oldNext = 1;
										}
										console.log(
											"oldPrev:"+ oldPrevious 
										);
										console.log(
											"oldNext:"+ oldNext 
											);
										console.log(
											"NewPrevious:"+ newPrevious
										);
										console.log(
											"NuNext:"+ newNext 
										);
										// Now we've worked out where we are and where we're going, 
										// by adding/removing classes we'll trigger the transitions.
										// Reset old next/prev elements to default classes
										items[oldPrevious].className = itemClassName;
										items[oldNext].className = itemClassName;
										// Add new classes
										items[newPrevious].className = itemClassName + " prev";
										items[slide].className = itemClassName + " active";
										items[newNext].className = itemClassName + " next";
									}
								}
							}

							function initCarousel() {
								setInitialClasses();
								setEventListeners();
								// Set moving to false so that the carousel becomes interactive
								moving = false;
							}					
							initCarousel();
							
							function autoplay() {
							interval = setInterval(function(){
							moveNext();
							}, 4000);}
					        autoplay();
					}(document));

					</script>
					
					<video  autoplay controls>
						<source src="videos/Trailer.mp4" type="video/mp4">
						Your browser does not support the video tag.
					</video>
					
				</section>					
			</div>
		</body>
		<footer>
			<ul class="info">
				<li>
					Autor: Andrez Ramirez.
				</li>
				<li>
					N° Telf: 0995667722.
				</li>
				<li>
					Correo: andrezzz2312@gmail.com
				</li>
			</ul>				
			<ul class="info2">
					<li>						
						<a href='https://www.facebook.com/'>
							<img src="images/facebook.svg">
						</a>					
					</li>
					<li>						
						<a href='https://www.instagram.com/?hl=en'>
							<img src="images/instagram.svg">
						</a>
					</li>
					<li>					
						<a href='https://twitter.com/'>
							<img src="images/twitter.svg">
						</a>					
					</li>
				</ul>
		</footer>
	</html>